<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="layout/base :: base">
<head>
    <title th:text="${medicine.id != null} ? 'Edit Medicine - PharmaCare Pro' : 'Add Medicine - PharmaCare Pro'">Add Medicine - PharmaCare Pro</title>
</head>
<body>
    <div th:fragment="content">
        <!-- Form Card -->
        <div class="card fade-in">
            <div class="card-header">
                <h1 class="card-title">
                    <i th:class="${medicine.id != null} ? 'fas fa-edit' : 'fas fa-plus-circle'"></i>
                    <span th:text="${medicine.id != null} ? 'Edit Medicine' : 'Add New Medicine'">Add New Medicine</span>
                </h1>
            </div>
            <div class="card-body">
                <!-- Medicine Form -->
                <form th:action="@{/medicines/save}" th:object="${medicine}" method="post">
                    <input type="hidden" th:field="*{id}" th:if="*{id != null}">
                    
                    <div class="form-grid">
                        <!-- Basic Information -->
                        <div class="form-group">
                            <label for="name" class="form-label required">Medicine Name</label>
                            <div class="input-group">
                                <i class="fas fa-pills input-icon"></i>
                                <input type="text" th:field="*{name}" class="form-control" 
                                       placeholder="e.g., Paracetamol 500mg" required>
                            </div>
                            <div th:if="${#fields.hasErrors('name')}" class="error-message">
                                <i class="fas fa-exclamation-circle"></i>
                                <span th:errors="*{name}">Error message</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="manufacturer" class="form-label required">Manufacturer</label>
                            <div class="input-group">
                                <i class="fas fa-industry input-icon"></i>
                                <input type="text" th:field="*{manufacturer}" class="form-control" 
                                       placeholder="e.g., Sun Pharma" required>
                            </div>
                            <div th:if="${#fields.hasErrors('manufacturer')}" class="error-message">
                                <i class="fas fa-exclamation-circle"></i>
                                <span th:errors="*{manufacturer}">Error message</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="category" class="form-label">Category</label>
                            <select th:field="*{category}" class="form-control form-select">
                                <option value="">Select Category</option>
                                <option value="Pain Relief">Pain Relief</option>
                                <option value="Antibiotics">Antibiotics</option>
                                <option value="Cold & Cough">Cold & Cough</option>
                                <option value="Digestive">Digestive</option>
                                <option value="Vitamins">Vitamins</option>
                                <option value="Diabetes">Diabetes</option>
                                <option value="Cardiovascular">Cardiovascular</option>
                                <option value="Skin Care">Skin Care</option>
                                <option value="Respiratory">Respiratory</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="batchNumber" class="form-label">Batch Number</label>
                            <div class="input-group">
                                <i class="fas fa-barcode input-icon"></i>
                                <input type="text" th:field="*{batchNumber}" class="form-control" 
                                       placeholder="e.g., PAR001">
                            </div>
                        </div>

                        <!-- Pricing & Stock -->
                        <div class="form-group">
                            <label for="price" class="form-label required">Price (â‚¹)</label>
                            <div class="input-group">
                                <i class="fas fa-rupee-sign input-icon"></i>
                                <input type="number" th:field="*{price}" class="form-control" 
                                       placeholder="0.00" step="0.01" min="0" required>
                            </div>
                            <div th:if="${#fields.hasErrors('price')}" class="error-message">
                                <i class="fas fa-exclamation-circle"></i>
                                <span th:errors="*{price}">Error message</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="stockQuantity" class="form-label required">Stock Quantity</label>
                            <div class="input-group">
                                <i class="fas fa-boxes input-icon"></i>
                                <input type="number" th:field="*{stockQuantity}" class="form-control" 
                                       placeholder="0" min="0" required>
                            </div>
                            <div th:if="${#fields.hasErrors('stockQuantity')}" class="error-message">
                                <i class="fas fa-exclamation-circle"></i>
                                <span th:errors="*{stockQuantity}">Error message</span>
                            </div>
                        </div>

                        <!-- Expiry Date -->
                        <div class="form-group">
                            <label for="expiryDate" class="form-label required">Expiry Date</label>
                            <div class="input-group">
                                <i class="fas fa-calendar-alt input-icon"></i>
                                <input type="date" th:field="*{expiryDate}" class="form-control" required>
                            </div>
                            <div class="form-help">Must be a future date</div>
                            <div th:if="${#fields.hasErrors('expiryDate')}" class="error-message">
                                <i class="fas fa-exclamation-circle"></i>
                                <span th:errors="*{expiryDate}">Error message</span>
                            </div>
                        </div>

                        <!-- Prescription Required -->
                        <div class="form-group">
                            <label class="form-label">Prescription Status</label>
                            <div class="checkbox-group">
                                <input type="checkbox" th:field="*{prescriptionRequired}" class="checkbox">
                                <label for="prescriptionRequired1" class="checkbox-label">Requires Prescription</label>
                            </div>
                            <div class="form-help">Check if this medicine requires a doctor's prescription</div>
                        </div>

                        <!-- Description -->
                        <div class="form-group full-width">
                            <label for="description" class="form-label">Description</label>
                            <textarea th:field="*{description}" class="form-control" rows="3" 
                                      placeholder="Enter medicine description, usage instructions, etc."></textarea>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <a th:href="@{/medicines}" class="btn btn-secondary">
                            <i class="fas fa-times"></i>
                            Cancel
                        </a>
                        <button type="reset" class="btn btn-secondary">
                            <i class="fas fa-redo"></i>
                            Reset
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            <span th:text="${medicine.id != null} ? 'Update Medicine' : 'Save Medicine'">Save Medicine</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>